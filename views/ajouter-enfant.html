<div class="page-header">
    <h1 class="page-title">{{ isEditMode ? 'Modifier les informations' : 'Ajouter un enfant' }}</h1>
</div>

<div class="card" style="max-width: 600px; margin: 0 auto; cursor: default;">
    <form name="childForm" ng-submit="submitForm()" novalidate>

        <!-- Prénom -->
        <div class="form-group">
            <label for="firstName">Prénom *</label>
            <input type="text" id="firstName" name="firstName" class="form-control" ng-model="child.firstName"
                ng-class="{ 'input-error': childForm.firstName.$invalid && childForm.firstName.$touched }" required
                ng-minlength="2" ng-maxlength="50">
            <div class="error-msg" ng-show="childForm.firstName.$touched && childForm.firstName.$error.required">
                Le prénom est requis.
            </div>
            <div class="error-msg" ng-show="childForm.firstName.$error.minlength">
                Le prénom doit contenir au moins 2 caractères.
            </div>
        </div>

        <!-- Nom -->
        <div class="form-group">
            <label for="lastName">Nom</label>
            <input type="text" id="lastName" name="lastName" class="form-control" ng-model="child.lastName"
                ng-minlength="2" ng-maxlength="50">
        </div>

        <!-- Année scolaire -->
        <div class="form-group">
            <label for="schoolYear">Niveau scolaire</label>
            <input type="text" id="schoolYear" name="schoolYear" class="form-control" ng-model="child.schoolYear"
                placeholder="Ex: CP, 6ème, ...">
        </div>

        <!-- School Name -->
        <div class="form-group">
            <label for="schoolName">Nom de l'établissement scolaire</label>
            <input type="text" id="schoolName" name="schoolName" class="form-control" ng-model="child.schoolName">
        </div>

        <!-- Address -->
        <div class="form-group">
            <label for="address">Adresse</label>
            <textarea id="address" name="address" class="form-control" ng-model="child.address" rows="2"></textarea>
        </div>

        <!-- Date de Naissance -->
        <div class="form-group">
            <label for="birthDate">Date de naissance *</label>
            <input type="date" id="birthDate" name="birthDate" class="form-control" ng-model="child.birthDate"
                ng-change="validateDate()"
                ng-class="{ 'input-error': childForm.birthDate.$invalid && childForm.birthDate.$touched }" required>
            <div class="error-msg" ng-show="childForm.birthDate.$touched && childForm.birthDate.$error.required">
                La date de naissance est requise.
            </div>
            <div class="error-msg" ng-show="childForm.birthDate.$error.futureDate">
                La date ne peut pas être dans le futur.
            </div>
        </div>

        <!-- Genre -->
        <div class="form-group">
            <label for="gender">Genre *</label>
            <select id="gender" name="gender" class="form-control" ng-model="child.gender" required>
                <option value="boy">Garçon</option>
                <option value="girl">Fille</option>
                <option value="other">Autre</option>
            </select>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary" ng-disabled="childForm.$invalid || isSubmitting">
            <span ng-show="!isSubmitting">{{ isEditMode ? 'Enregistrer' : 'Ajouter' }}</span>
            <span ng-show="isSubmitting"><i class="fa fa-spinner fa-spin"></i> {{ isEditMode ? 'Enregistrement...' :
                'Ajout en cours...' }}</span>
        </button>

        <!-- Success Message -->
        <div ng-if="successMessage" class="success-msg"
            style="margin-top: 15px; color: var(--success-green); font-weight: bold;">
            <i class="fa fa-check-circle"></i> {{ successMessage }}
        </div>

    </form>
</div>